# Rule: Architecture & Folder Structure

1.  **Adhere to `docs/architecture.md`**: All code must follow the folder structure and data flow outlined in the project's architecture document.

2.  **Feature-Sliced Structure**: Group domain-specific logic inside the `src/features` directory. For example, all components, hooks, and server actions related to playlist generation should reside in `src/features/playlist`.

3.  **Component Organization**:
    *   `src/components/ui`: Reserved for components generated by `shadcn/ui`. Do not modify these directly unless for styling tweaks.
    *   `src/components/shared`: For project-wide, reusable components that are not tied to a specific feature (e.g., `PageHeader`, `SiteFooter`).
    *   Feature-specific components (e.g., `PlaylistGeneratorForm`) belong inside their respective feature directory (e.g., `src/features/playlist/components`).

4.  **Services & Libraries**:
    *   `src/lib`: Contains all third-party client initializations and utility functions.
    *   `src/lib/supabase`: For the Supabase client.
    *   `src/lib/spotify`: For the Spotify API client and the **Spotify Enrichment Service**.

5.  **Database Schema**: All database interactions must be designed according to the versioned schema in `docs/architecture.md`, including the `playlist_lineage` and `playlists` tables. 